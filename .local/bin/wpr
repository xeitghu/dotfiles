#!/bin/bash
# =================================================================
#          Simple Wallpaper Switcher (Your Version)
# =================================================================
# This script ONLY changes the wallpaper from the main wallpaper directory.
# It uses your preferred 'grow' transition effect.

# --- CONFIGURATION ---
#  Path to your main wallpaper directory.
WALLPAPER_DIR="$HOME/Pictures/walls"

# --- SCRIPT LOGIC ---

# 1. Check if the directory exists.
if [ ! -d "$WALLPAPER_DIR" ]; then
  notify-send "Wallpaper Script Error" "Directory not found:\n$WALLPAPER_DIR" -i "dialog-error"
  exit 1
fi

# 2. Find a random image file.
#    -not -path "*/hypr/*" is added to exclude potential system/theme specific wallpapers.
wallpaper=$(find "$WALLPAPER_DIR" -maxdepth 1 -type f \( -iname "*.jpg" -o -iname "*.jpeg" -o -iname "*.png" -o -iname "*.gif" \) | shuf -n 1)

# 3. Check if a wallpaper was found.
if [ -z "$wallpaper" ]; then
  notify-send "Wallpaper Script Error" "No images found in:\n$WALLPAPER_DIR" -i "dialog-error"
  exit 1
fi

# 4. Set the wallpaper using your custom transition
swww img "$wallpaper" \
  --transition-type grow \
  --transition-pos 0.5,0.5 \
  --transition-duration 1.2 \
  --transition-fps 60

# 5. Send a confirmation notification
notify-send -t 500 " Wallpaper Changed" "$(basename "$wallpaper")" -i "preferences-desktop-wallpaper"
