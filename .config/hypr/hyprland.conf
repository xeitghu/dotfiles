# ┌────────────────────────────────────────────────────────────────────────────┐
# │                         HYPRLAND - MAIN CONFIG                             │
# └────────────────────────────────────────────────────────────────────────────┘

# ┌────────────────────────────────────────────────────────────────────────────┐
# │                               Core & Sourcing                              │
# └────────────────────────────────────────────────────────────────────────────┘

# --- Core Paths & Applications ---
# [INFO] Centralized path variable for easy management.
$HYPR = ~/.config/hypr

# [CONFIG] Define core applications for keybindings.
$mainMod     = SUPER
$terminal    = kitty
$fileManager = thunar
$menu        = wofi
$browser     = zen-browser

# --- External Files ---
# [INFO] Load external configuration files for better organization.
source = $HYPR/theme.conf       # Visual theme settings (colors, borders, etc.)
source = $HYPR/look.conf        # Application appearance settings (GTK, Qt)
source = $HYPR/rules.conf       # Rules for specific windows (floating, size, etc.)
source = $HYPR/keybinds.conf    # All keybindings

# ┌────────────────────────────────────────────────────────────────────────────┐
# │                         Autostart & Environment                            │
# └────────────────────────────────────────────────────────────────────────────┘

# --- Monitors ---
# [CONFIG] Set monitor resolutions and refresh rates.
monitor = eDP-1, preferred, auto, 1
monitor = , preferred, auto, auto

# --- Autostart Applications ---
# [INFO] Applications to launch on startup.
exec-once = waybar                             # The status bar
exec-once = dunst                              # The notification daemon
exec-once = gamemoded -r                       # Feral GameMode daemon
exec-once = clipse -listen                     # Start clipboard history daemon
exec-once = lxqt-policykit-agent               # Authentication agent for privileges
exec-once = xsettingsd                         # Daemon for GTK settings
exec-once = swww-daemon                        # Wallpaper daemon
exec-once = ydotoold                           # Tool for input automation
exec-once = gammastep &                        # Manages screen temperature for eye protection.
exec-once = libinput-gestures-setup start      # Daemon for touchpad support.
exec-once = $HYPR/scripts/core/idle.sh         # Idle management daemon
exec-once = $HYPR/scripts/core/startup.sh      # Apply last used theme

# --- Cursor Theming ---
# [CONFIG] Cursor theme and size settings.
env = HYPRCURSOR_THEME, catppuccin-mocha-light-cursors
env = HYPRCURSOR_SIZE,  24
env = XCURSOR_THEME,    catppuccin-mocha-light-cursors
env = XCURSOR_SIZE,     24

# --- Application Theming ---
# [CONFIG] Set application themes.
env = GTK_THEME,            catppuccin-mocha-lavender-standard+default
env = QT_QPA_PLATFORMTHEME, qt6ct 

# --- Wayland & X11 Backend ---
# [INFO] General variables for a Wayland session.
env = GDK_BACKEND, wayland,x11
env = XDG_SESSION_TYPE, wayland
env = QT_QPA_PLATFORM, wayland        # [FIX] Makes Qt applications run natively on Wayland
env = MOZ_ENABLE_WAYLAND, 1           # [FIX] Force Firefox to run in native Wayland mode

# --- NVIDIA Specific ---
# [CRITICAL] Required variables for running Hyprland on NVIDIA drivers.
env = LIBVA_DRIVER_NAME, nvidia
env = GBM_BACKEND, nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME, nvidia
env = WLR_NO_HARDWARE_CURSORS, 1        # [FIX] Disable hardware cursors to fix artifacts on NVIDIA.

# ┌────────────────────────────────────────────────────────────────────────────┐
# │                               Input Devices                                │
# └────────────────────────────────────────────────────────────────────────────┘

# --- Keyboard & Mouse Settings ---
input {
    kb_layout    = us,ru
    kb_options   = grp:alt_shift_toggle
    repeat_rate  = 50
    repeat_delay = 200
    follow_mouse = 1

    touchpad {
        natural_scroll          = false
        middle_button_emulation = true
        scroll_factor           = 1
    }
}
