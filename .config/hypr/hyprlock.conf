# ┌────────────────────────────────────────────────────────────────────────────┐
# │                           HYPRLOCK - MAIN CONFIG                           │
# │                     - SBAC Formatted with New Widget -                     │
# └────────────────────────────────────────────────────────────────────────────┘

# ┌────────────────────────────────────────────────────────────────────────────┐
# │                             GENERAL SETTINGS                               │
# └────────────────────────────────────────────────────────────────────────────┘
general {
    # [CONFIG] Hide the mouse cursor on the lock screen
    hide_cursor = true
}

# ┌────────────────────────────────────────────────────────────────────────────┐
# │                                 BACKGROUND                                 │
# └────────────────────────────────────────────────────────────────────────────┘
background {
    # [CONFIG] Path to your wallpaper
    path              = ~/Pictures/walls/sushi.png
    
    # [CONFIG] Visual settings for the background blur and effects
    blur_passes       = 3
    blur_size         = 7
    noise             = 0.0117
    contrast          = 0.8916
    brightness        = 0.8172
    vibrancy          = 0.1696
    vibrancy_darkness = 0.0
}

# ┌────────────────────────────────────────────────────────────────────────────┐
# │                                  TOP ROW                                   │
# └────────────────────────────────────────────────────────────────────────────┘

# --- Network Status Widget ---
label {
    # [INFO] Shows current network connection status (Wi-Fi/Ethernet)
    text          = cmd[update:5000] ~/.config/hypr/scripts/utils/network-status.sh
    color         = rgba(cdd6f4ff)        # $text
    font_size     = 16
    font_family   = JetBrains Mono Nerd Font
    
    position      = 30, -30
    halign        = left
    valign        = top
}

# --- Smart Battery Widget ---
label {
    # [INFO] Shows battery status with dynamic icons
    text          = cmd[update:5000] ~/.config/hypr/scripts/utils/battery-status.sh
    color         = rgba(cdd6f4ff)        # $text
    font_size     = 16
    font_family   = JetBrains Mono Nerd Font
    
    position      = -30, -30
    halign        = right
    valign        = top
}

# ┌────────────────────────────────────────────────────────────────────────────┐
# │                              CENTRAL COLUMN                                │
# └────────────────────────────────────────────────────────────────────────────┘

# --- Dynamic Greeting ---
label {
    # [INFO] Shows a greeting that changes based on the time of day
    text         = cmd[update:60000] GREETING=$(case $(date +%H) in 0[5-9]|1[01]) echo "Good morning,";; 1[2-7]) echo "Good afternoon,";; *) echo "Good evening,";; esac); echo "$GREETING $USER"
    color        = rgba(bac2deff)        # $subtext1
    font_size    = 20
    font_family  = JetBrains Mono Nerd Font
    
    position     = 0, -280
    halign       = center
    valign       = center
}

# --- Avatar ---
image {
    # [CONFIG] Path to your personal avatar image
    path           = ~/Pictures/PFP's/x8u.png
    size           = 120
    
    # [CONFIG] Avatar border styling
    border_size    = 3
    border_color   = rgba(b4befeff)        # $lavender
    
    position       = 0, -180
    halign         = center
    valign         = center
}

# --- Input Field ---
input-field {
    # [CONFIG] Input field dimensions and position
    size              = 280, 55
    position          = 0, -60
    halign            = center
    valign            = center

    # [CONFIG] Visual appearance and colors
    outline_thickness = 2
    dots_size         = 0.25
    dots_spacing      = 0.2
    dots_center       = true
    outer_color       = rgba(b4befeff)        # $lavender
    inner_color       = rgba(303042ff)        # $mantle
    font_color        = rgba(cdd6f4ff)        # $text
    rounding          = 15
    
    # [CONFIG] Behavior and text placeholders
    fade_on_empty     = true
    placeholder_text  = <i>Password...</i>
    hide_input        = false
    
    # [INFO] Styling for failed password attempts
    fail_color        = rgba(f38ba8ff)        # $red
    fail_text         = <i>$FAIL</i>
}

# --- Clock ---
label {
    # [INFO] Displays the current time, updated every second
    text          = cmd[update:1000] echo "$(date +"%R")"
    color         = rgba(cdd6f4ff)        # $text
    font_size     = 100
    font_family   = JetBrains Mono Nerd Font Bold
    
    position      = 0, 50
    halign        = center
    valign        = center
}

# --- Now Playing Widget ---
label {
    # [INFO] Executes an external script to get the current song
    text          = cmd[update:1000] ~/.config/hypr/scripts/utils/now-playing.sh
    color         = rgba(cdd6f4ff)        # $text
    font_size     = 18
    font_family   = JetBrains Mono Nerd Font
    
    position      = 0, 150
    halign        = center
    valign        = center
}

# ┌────────────────────────────────────────────────────────────────────────────┐
# │                           BOTTOM ROW (HUD)                                 │
# └────────────────────────────────────────────────────────────────────────────┘

# --- Uptime Widget ---
label {
    # [INFO] Shows the system uptime
    text          = cmd[update:1000] echo "  $(uptime -p | sed -e 's/up //')"
    color         = rgba(74c7ecff)        # $sapphire
    font_size     = 16
    font_family   = JetBrains Mono Nerd Font
    
    position      = 30, 30
    halign        = left
    valign        = bottom
}

# --- Locked Status ---
label {
    # [INFO] Displays a static 'Locked' icon and text
    text          =  Locked
    color         = rgba(cdd6f4ff)        # $text
    font_size     = 16
    font_family   = JetBrains Mono Nerd Font
    
    position      = 0, 20
    halign        = center
    valign        = bottom
}

# --- Keyboard Layout Widget ---
label {
    # [CRITICAL] Do not change. This widget is essential for password entry.
    text          = cmd[update:100] echo "  $(hyprctl devices -j | jq -r '.keyboards[] | select(.main == true) | .active_keymap' | cut -c 1-2 | tr 'a-z' 'A-Z')"
    color         = rgba(a6e3a1ff)        # $green
    font_size     = 20
    font_family   = JetBrains Mono Nerd Font
    
    position      = -30, 30
    halign        = right
    valign        = bottom
}
